# 企业级RAG知识库系统 - 生产环境配置

# === 环境设置 ===
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO

# === 应用配置 ===
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_TIMEOUT=300

# === 数据库配置 ===

# MongoDB - 文档存储
MONGODB_HOST=mongo
MONGODB_PORT=27017
MONGODB_USERNAME=admin
MONGODB_PASSWORD=your-strong-password-here
MONGODB_DATABASE=enterprise_rag
MONGODB_AUTH_SOURCE=admin
MONGODB_MAX_POOL_SIZE=100
MONGODB_MIN_POOL_SIZE=10

# Neo4j - 知识图谱
NEO4J_URI=bolt://neo4j:7687
NEO4J_USERNAME=neo4j
NEO4J_PASSWORD=your-neo4j-password-here
NEO4J_DATABASE=neo4j
NEO4J_MAX_CONNECTION_LIFETIME=3600
NEO4J_MAX_CONNECTION_POOL_SIZE=50

# Qdrant - 向量数据库
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_API_KEY=
QDRANT_COLLECTION_NAME=enterprise_vectors
QDRANT_VECTOR_SIZE=1536

# Redis - 缓存
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password-here
REDIS_DB=0
REDIS_MAX_CONNECTIONS=100
REDIS_SOCKET_TIMEOUT=30

# Elasticsearch - 全文检索
ELASTICSEARCH_HOSTS=elasticsearch:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=
ELASTICSEARCH_INDEX=enterprise_docs
ELASTICSEARCH_TIMEOUT=30

# MinIO - 对象存储
MINIO_ENDPOINT=minio:9000
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=your-minio-secret-here
MINIO_BUCKET=rag-documents
MINIO_SECURE=false

# === LLM配置 ===

# 主要提供商
LLM_PROVIDER=anthropic
LLM_MODEL=claude-3-5-sonnet-20241022
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=2000
LLM_TIMEOUT=60

# Anthropic配置
ANTHROPIC_AUTH_TOKEN=your-anthropic-api-key-here
ANTHROPIC_BEDROCK_BASE_URL=https://ai-router.anker-in.com/bedrock
ANTHROPIC_MODEL=claude-3-5-sonnet-20241022

# OpenAI配置（备选）
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_MODEL=gpt-4-turbo-preview

# Azure OpenAI配置（备选）
AZURE_OPENAI_API_KEY=your-azure-api-key-here
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_VERSION=2024-02-01
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# === 嵌入模型配置 ===
EMBEDDING_PROVIDER=huggingface
EMBEDDING_MODEL=BAAI/bge-large-zh-v1.5
EMBEDDING_DEVICE=cuda
EMBEDDING_BATCH_SIZE=32

# === 安全配置 ===

# JWT认证
JWT_SECRET_KEY=your-super-secret-jwt-key-here-make-it-long-and-random
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=60
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# 应用密钥
SECRET_KEY=your-application-secret-key-here-also-very-long-and-random

# CORS设置
CORS_ORIGINS=["https://your-domain.com", "https://www.your-domain.com"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS"]
CORS_ALLOW_HEADERS=["*"]

# 速率限制
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST=20

# === 文件处理配置 ===
MAX_FILE_SIZE=100MB
ALLOWED_EXTENSIONS=["pdf", "docx", "txt", "md", "html", "csv", "xlsx"]
CHUNK_SIZE=512
CHUNK_OVERLAP=50

# === 监控配置 ===

# Prometheus
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true

# Grafana
GRAFANA_ADMIN_PASSWORD=your-grafana-password-here
GRAFANA_PORT=3001

# Sentry错误跟踪（可选）
SENTRY_DSN=your-sentry-dsn-here
SENTRY_TRACES_SAMPLE_RATE=0.1

# === 性能配置 ===

# 并发设置
MAX_WORKERS=4
WORKER_CONNECTIONS=1000
KEEPALIVE_TIMEOUT=5

# 缓存设置
CACHE_TTL=3600
CACHE_MAX_SIZE=1000

# 检索配置
RETRIEVAL_TOP_K=10
RETRIEVAL_SCORE_THRESHOLD=0.7
HYBRID_SEARCH_ALPHA=0.5

# === SSL配置 ===
SSL_ENABLED=false
SSL_CERT_PATH=/etc/nginx/ssl/cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/key.pem
SSL_REDIRECT=true

# === 备份配置 ===
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"  # 每天凌晨2点
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=your-backup-bucket
BACKUP_S3_ACCESS_KEY=your-s3-access-key
BACKUP_S3_SECRET_KEY=your-s3-secret-key

# === 日志配置 ===
LOG_FORMAT=json
LOG_ROTATION=true
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# === 健康检查配置 ===
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10
HEALTH_CHECK_RETRIES=3

# === 其他配置 ===

# 时区设置
TIMEZONE=Asia/Shanghai

# 语言设置
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=["zh-CN", "en-US"]

# 分析配置
ANALYTICS_ENABLED=true
USAGE_TRACKING=true
PERFORMANCE_MONITORING=true